"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const HookRegistry_1 = require("../models/HookRegistry");
const HookType_1 = require("../models/HookType");
const HookExecutionProcessor_1 = require("./HookExecutionProcessor");
class StepExecutionStartingProcessor extends HookExecutionProcessor_1.HookExecutionProcessor {
    constructor() {
        super();
        this.hookType = HookType_1.HookType.BeforeStep;
    }
    getExecutionInfo(message) {
        return message.stepExecutionStartingRequest
            .currentExecutionInfo;
    }
    getApplicableHooks(message) {
        const request = message.stepExecutionStartingRequest;
        const execInfo = request.currentExecutionInfo;
        const specInfo = execInfo.currentSpec;
        const scenarioInfo = execInfo.currentScenario;
        const specTags = specInfo.tags ? specInfo.tags : [];
        const scenTags = scenarioInfo.tags ? scenarioInfo.tags : [];
        return HookRegistry_1.default.get(this.hookType, specTags.concat(scenTags));
    }
}
exports.StepExecutionStartingProcessor = StepExecutionStartingProcessor;
